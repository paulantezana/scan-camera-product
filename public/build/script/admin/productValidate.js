let html5QrCode,lastResult="";function startCamera(){SnModal.open("cameraModal");try{html5QrCode.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},onScanSuccess,onScanError)}catch(e){console.log(e,"ERRRRRRRRRRRRRRRRRR")}}function reStartCamera(){startCamera(),SnModal.close("validateModal")}function qrSearchByCodeStart(){var e=document.getElementById("qrSearchByCode").value;validateByPassengerId(e)}function stopCamera(){2===html5QrCode.getState()&&html5QrCode.stop().then(e=>{}).catch(e=>{SnMessage.danger({content:e})}),SnModal.close("cameraModal"),lastResult=""}function onScanSuccess(e,t){e!=lastResult&&(lastResult=e,!isNaN(e)&&10<=e.length&&e.length<=20?validateByCodeId(e):SnMessage.warning({content:'El código "'+e+'" es un formato inválido.'}))}function onScanError(e,t){}function validateByCodeId(e){SnLoadingState(!0,"jsAction"),RequestApi.fetch("/admin/product/verified",{method:"POST",body:{code:e}}).then(e=>{e.success?SnMessage.success({content:e.message}):dynamicResponseErrorModalMessage(e)}).finally(()=>{SnLoadingState(!1,"jsAction")})}function drawResult(e){}document.addEventListener("DOMContentLoaded",()=>{html5QrCode=new Html5Qrcode("qrReader")});